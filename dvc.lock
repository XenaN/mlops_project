schema: '2.0'
stages:
  merge_data@O3:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_O3_filtered.csv
      data/external/ES_O3.csv data/interim/updated/ES_O3_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_O3_updated.csv
      md5: b2c0328693896bf31c8260730f13af43
      size: 3083410
  merge_data@NO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO_filtered.csv
      data/external/ES_NO.csv data/interim/updated/ES_NO_updated.csv
    deps:
    - path: data/external/
      md5: 1b42b8c5e8a4e267604622a3e7d96b8f.dir
      size: 42186767
      nfiles: 8
    - path: data/interim/filtered
      md5: f99d5bd460b830c2e834704ad52bc5f0.dir
      size: 19438151
      nfiles: 8
    - path: src/data/data_raw_merge.py
      md5: c0b3192a31f60e77bda8f77e4618fccd
      size: 2552
    outs:
    - path: data/interim/updated/ES_NO_updated.csv
      md5: 3db1db3703b6943f3b18ffe17c71e3ee
      size: 1806411
  merge_data@PM10:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM10_filtered.csv
      data/external/ES_PM10.csv data/interim/updated/ES_PM10_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_PM10_updated.csv
      md5: 8306935123bfc7a92d60b486654c1f4e
      size: 3142143
  merge_data@PM2.5:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM2.5_filtered.csv
      data/external/ES_PM2.5.csv data/interim/updated/ES_PM2.5_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_PM2.5_updated.csv
      md5: 0027d94363d3a3908430f0aaac42dba3
      size: 3136998
  merge_data@NO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO2_filtered.csv
      data/external/ES_NO2.csv data/interim/updated/ES_NO2_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_NO2_updated.csv
      md5: a68c0f673c07d91716d989f35caf0d2a
      size: 3080157
  merge_data@CO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_CO_filtered.csv
      data/external/ES_CO.csv data/interim/updated/ES_CO_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_CO_updated.csv
      md5: 46ff0a455109248864c4a7c9542e33bf
      size: 3043755
  merge_data@SO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_SO2_filtered.csv
      data/external/ES_SO2.csv data/interim/updated/ES_SO2_updated.csv
    deps:
    - path: data/external/
      md5: 134b3d3c0b07045995ffddcb74a652aa.dir
      size: 33908902
      nfiles: 7
    - path: data/interim/filtered
      md5: 98feb2146070fce17265b62ef541e8ed.dir
      size: 29099206
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2598
    outs:
    - path: data/interim/updated/ES_SO2_updated.csv
      md5: b2cf22979a6b856bc3484c107b776afc
      size: 3085549
  filter_data@NO2:
    cmd: python src/data/filter_data.py data/raw/ES_NO2/ data/interim/filtered/ES_NO2_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_NO2_filtered.csv
      md5: d143d66504d46857aae3ceaeacc1b0e5
      size: 4779225
  filter_data@NO:
    cmd: python src/data/filter_data.py data/raw/ES_NO/ data/interim/filtered/ES_NO_filtered.csv
    deps:
    - path: data/raw/
      md5: f9f0cbd3ac6022e3baa43e123dc0f30c.dir
      size: 7097091282
      nfiles: 5380
    outs:
    - path: data/interim/filtered/ES_NO_filtered.csv
      md5: 59cba7e5e2ca6515bb7c72c17368adb0
      size: 2740661
  filter_data@SO2:
    cmd: python src/data/filter_data.py data/raw/ES_SO2/ data/interim/filtered/ES_SO2_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_SO2_filtered.csv
      md5: 6bc5f6132910dabe61bfb0fc664f0cab
      size: 4826220
  filter_data@CO:
    cmd: python src/data/filter_data.py data/raw/ES_CO/ data/interim/filtered/ES_CO_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_CO_filtered.csv
      md5: f81ccefd1466a269b9f6fdef3b54b61c
      size: 4805328
  filter_data@O3:
    cmd: python src/data/filter_data.py data/raw/ES_O3/ data/interim/filtered/ES_O3_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_O3_filtered.csv
      md5: 36942abd273ff1efad390e3e8e4181c7
      size: 4824082
  filter_data@PM2.5:
    cmd: python src/data/filter_data.py data/raw/ES_PM2.5/ data/interim/filtered/ES_PM2.5_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_PM2.5_filtered.csv
      md5: ef7bc5669bec3b36ee44c09a29f36e13
      size: 4939985
  filter_data@PM10:
    cmd: python src/data/filter_data.py data/raw/ES_PM10/ data/interim/filtered/ES_PM10_filtered.csv
    deps:
    - path: data/raw/
      md5: 8349a1b126616c3fa676e816899896f9.dir
      size: 10072064631
      nfiles: 6722
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1166
    outs:
    - path: data/interim/filtered/ES_PM10_filtered.csv
      md5: aacf03fd2d15553ded220125a4fc86fa
      size: 4924295
  clean_data@SO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_SO2_updated.csv data/interim/cleaned/ES_SO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_SO2_cleaned.csv
      md5: eb65cebd1898337c4287428f7dfbf331
      size: 3107594
  clean_data@O3:
    cmd: python src/data/clean_data.py data/interim/updated/ES_O3_updated.csv data/interim/cleaned/ES_O3_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_O3_cleaned.csv
      md5: c82fe61465d051e62ed23944aa95f09f
      size: 3105304
  clean_data@CO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_CO_updated.csv data/interim/cleaned/ES_CO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_CO_cleaned.csv
      md5: 7d421d9f1fd262baffa8328075ed4bdf
      size: 3065498
  clean_data@NO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO_updated.csv data/interim/cleaned/ES_NO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 9de6f03f4a237eae1c44a09db92a8e83.dir
      size: 12732484
      nfiles: 8
    outs:
    - path: data/interim/cleaned/ES_NO_cleaned.csv
      md5: 9e8ff7faf689fd68598b500f3e737ce6
      size: 1814055
  clean_data@PM2.5:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM2.5_updated.csv data/interim/cleaned/ES_PM2.5_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_PM2.5_cleaned.csv
      md5: 8bac96c034b5dfaace264b5ded6bbbd8
      size: 3159345
  clean_data@PM10:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM10_updated.csv data/interim/cleaned/ES_PM10_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_PM10_cleaned.csv
      md5: 802dc2126191f69b1f84cf6c184bfc40
      size: 3164490
  clean_data@NO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO2_updated.csv data/interim/cleaned/ES_NO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 0c29dfbd6c93f26d88816d73c67bbba3.dir
      size: 18572082
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1391
    outs:
    - path: data/interim/cleaned/ES_NO2_cleaned.csv
      md5: a7335649d281ab289d9ea8a7f3741af0
      size: 3102051
  load_historical_data@CO:
    cmd: python src/data/data_loading_historical.py data/raw/ CO 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_CO
      md5: 2cb8467ff6d832c60e8b157a7f6af100.dir
      size: 950164367
      nfiles: 620
    - path: data/raw/ES_CO_urls.txt
      md5: 42530a95bcdd6b53f685c7aa26b37d7d
      size: 57663
  load_historical_data@PM10:
    cmd: python src/data/data_loading_historical.py data/raw/ PM10 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_PM10
      md5: 9ea628dc4345ff8b8c43f1968d46d5f1.dir
      size: 1731229996
      nfiles: 1241
    - path: data/raw/ES_PM10_urls.txt
      md5: 9a36e4db793ec80f1d4b857ee4ede091
      size: 114267
  load_historical_data@NO:
    cmd: python src/data/data_loading_historical.py data/raw/ NO 8
    deps:
    - path: metadata/download_config.json
      md5: 2c8889bb780db391582dc49b0b29f236
      size: 181
    - path: src/data/data_loading_historical.py
      md5: 643bcfaa18678d1c3a7c86820661c0c0
      size: 3484
    outs:
    - path: data/raw/ES_NO
      md5: 7a4f489e684b7c9f8e5599ac89e8c14d.dir
      size: 1359725246
      nfiles: 1028
    - path: data/raw/ES_NO_urls.txt
      md5: f0945454120c2f1611fb1156e89ddc13
      size: 95607
  load_historical_data@NO2:
    cmd: python src/data/data_loading_historical.py data/raw/ NO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_NO2
      md5: e76398a2d75d40204701d94e864b492c.dir
      size: 2472722299
      nfiles: 1592
    - path: data/raw/ES_NO2_urls.txt
      md5: 8649d8b0161a8feb943259b9a1a66eea
      size: 146559
  load_historical_data@SO2:
    cmd: python src/data/data_loading_historical.py data/raw/ SO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_SO2
      md5: d2b5218982d4c0e5670ce2a72d642c9d.dir
      size: 1990983486
      nfiles: 1273
    - path: data/raw/ES_SO2_urls.txt
      md5: 572c05dea0e163e495dbeba586a4ca72
      size: 117119
  load_historical_data@O3:
    cmd: python src/data/data_loading_historical.py data/raw/ O3 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_O3
      md5: 8e205ae142485e082e019429f014e04c.dir
      size: 2056182154
      nfiles: 1312
    - path: data/raw/ES_O3_urls.txt
      md5: f23cce84008a81b1006e08feb51f52bc
      size: 120707
  load_historical_data@PM2.5:
    cmd: python src/data/data_loading_historical.py data/raw/ PM2.5 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 2e2815d68308bb33a7036db8cfff09d1
      size: 3465
    outs:
    - path: data/raw/ES_PM2.5
      md5: 2f9f1215825a18b0dff866eb813c5c5a.dir
      size: 870161625
      nfiles: 677
    - path: data/raw/ES_PM2.5_urls.txt
      md5: 8a65ecb02a84a982659315fe3fb39528
      size: 64318
  calculation_AQI:
    cmd: python src/features/data_preprocessing.py data/interim/cleaned/ data/processed/AQI_dataset.csv
    deps:
    - path: data/interim/cleaned/
      md5: cb57a87620c33eb9ef901df4e080da04.dir
      size: 18704352
      nfiles: 7
    - path: src/features/data_preprocessing.py
      md5: bb3719b9099dc8025234a699738ecf3f
      size: 9193
    outs:
    - path: data/processed/AQI_dataset.csv
      md5: 1c374a0284c3a250d0f6d2987eecc300
      size: 3588419
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py 1 data/processed/AQI_dataset.csv data/processed/train.csv
      data/processed/test.csv
    deps:
    - path: data/processed/AQI_dataset.csv
      md5: 1c374a0284c3a250d0f6d2987eecc300
      size: 3588419
    - path: src/models/prepare_datasets.py
      md5: b985faa6f2fb190e64d4d4cd67f3b015
      size: 956
    outs:
    - path: data/processed/test.csv
      md5: 38ad8d40eb520d395796e2c0682002d6
      size: 36
    - path: data/processed/train.csv
      md5: 5ee52004d869c1a0f367fb77e661d699
      size: 25761
  train:
    cmd: python src/models/train.py  data/processed/train.csv data/processed/test.csv
      models/model.clf
    deps:
    - path: data/processed/test.csv
      md5: 6b67e134ffc19b4d353fcc7d857064b2
      size: 36
    - path: data/processed/train.csv
      md5: a2037295f9af17810757e2782d19974c
      size: 25674
    - path: src/models/train.py
      md5: 312d96cfa93f118e40310c9b6ff2df0a
      size: 1778
    outs:
    - path: models/model.clf
      md5: fb34069bf8188040370b1b15a6acfd64
      size: 5666343
  evaluate:
    cmd: python src/models/evaluate.py  data/processed/test.csv models/model.clf reports/scores.json
    deps:
    - path: models/model.clf
      md5: fb34069bf8188040370b1b15a6acfd64
      size: 5666343
    - path: src/models/evaluate.py
      md5: 92a14da4077d8226a1a653268f3d4a67
      size: 805
    outs:
    - path: reports/scores.json
      md5: 6bc75ffaf53dede42dafcd5e1125c58c
      size: 29
