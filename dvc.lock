schema: '2.0'
stages:
  merge_data@O3:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_O3_filtered.csv
      data/external/ES_O3.csv data/interim/updated/ES_O3_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_O3_updated.csv
      md5: 696cbf31e1850142bf7827be88d086ea
      size: 5429386
  merge_data@NO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO_filtered.csv
      data/external/ES_NO.csv data/interim/updated/ES_NO_updated.csv
    deps:
    - path: data/external/
      md5: 1b42b8c5e8a4e267604622a3e7d96b8f.dir
      size: 42186767
      nfiles: 8
    - path: data/interim/filtered
      md5: f99d5bd460b830c2e834704ad52bc5f0.dir
      size: 19438151
      nfiles: 8
    - path: src/data/data_raw_merge.py
      md5: c0b3192a31f60e77bda8f77e4618fccd
      size: 2552
    outs:
    - path: data/interim/updated/ES_NO_updated.csv
      md5: 3db1db3703b6943f3b18ffe17c71e3ee
      size: 1806411
  merge_data@PM10:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM10_filtered.csv
      data/external/ES_PM10.csv data/interim/updated/ES_PM10_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_PM10_updated.csv
      md5: ceaf144ad2b209f1ead4e1a48ebd7ce3
      size: 5530383
  merge_data@PM2.5:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM2.5_filtered.csv
      data/external/ES_PM2.5.csv data/interim/updated/ES_PM2.5_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_PM2.5_updated.csv
      md5: 7099da61462da20b0d55bab540558d8d
      size: 5546195
  merge_data@NO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO2_filtered.csv
      data/external/ES_NO2.csv data/interim/updated/ES_NO2_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_NO2_updated.csv
      md5: 97a867d8330c2fa6444d1a7d270a0377
      size: 5384119
  merge_data@CO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_CO_filtered.csv
      data/external/ES_CO.csv data/interim/updated/ES_CO_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_CO_updated.csv
      md5: d66aa7d78fd015f7ef7d38663ead51cf
      size: 5410436
  merge_data@SO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_SO2_filtered.csv
      data/external/ES_SO2.csv data/interim/updated/ES_SO2_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 8a475e12353899bbf08cd395a7d7bc6b.dir
      size: 29460093
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: b3d1239ec00bc4f5acee183cda4c361f
      size: 2685
    outs:
    - path: data/interim/updated/ES_SO2_updated.csv
      md5: c45d4dff9b3398416215104e2ea9e36a
      size: 5431497
  filter_data@NO2:
    cmd: python src/data/filter_data.py data/raw/ES_NO2/ data/interim/filtered/ES_NO2_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_NO2_filtered.csv
      md5: 01dc628a6dc1ca17cdb924c4b2271f1b
      size: 4838786
  filter_data@NO:
    cmd: python src/data/filter_data.py data/raw/ES_NO/ data/interim/filtered/ES_NO_filtered.csv
    deps:
    - path: data/raw/
      md5: f9f0cbd3ac6022e3baa43e123dc0f30c.dir
      size: 7097091282
      nfiles: 5380
    outs:
    - path: data/interim/filtered/ES_NO_filtered.csv
      md5: 59cba7e5e2ca6515bb7c72c17368adb0
      size: 2740661
  filter_data@SO2:
    cmd: python src/data/filter_data.py data/raw/ES_SO2/ data/interim/filtered/ES_SO2_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_SO2_filtered.csv
      md5: 3d4a94638643d42be06d1ccc0abde675
      size: 4886164
  filter_data@CO:
    cmd: python src/data/filter_data.py data/raw/ES_CO/ data/interim/filtered/ES_CO_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_CO_filtered.csv
      md5: fd947c6c143a2aa341d09f6661e37275
      size: 4865103
  filter_data@O3:
    cmd: python src/data/filter_data.py data/raw/ES_O3/ data/interim/filtered/ES_O3_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_O3_filtered.csv
      md5: 7253f8fbf0c3f334a58e5af6d2ad6953
      size: 4884053
  filter_data@PM2.5:
    cmd: python src/data/filter_data.py data/raw/ES_PM2.5/ data/interim/filtered/ES_PM2.5_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_PM2.5_filtered.csv
      md5: 4c344edab1d57ffa77c211cfd4ae5952
      size: 5000862
  filter_data@PM10:
    cmd: python src/data/filter_data.py data/raw/ES_PM10/ data/interim/filtered/ES_PM10_filtered.csv
    deps:
    - path: data/raw/
      md5: aa265d802341a515f34efbffc97d2b70.dir
      size: 10203251783
      nfiles: 6726
    - path: src/data/filter_data.py
      md5: c87b049ad13772e20638d57f23c6b671
      size: 1208
    outs:
    - path: data/interim/filtered/ES_PM10_filtered.csv
      md5: e91dabf6ca86eac89fbf317a04146f1a
      size: 4985050
  clean_data@SO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_SO2_updated.csv data/interim/cleaned/ES_SO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_SO2_cleaned.csv
      md5: 40d19a15c0e72640dbef9c8ac56f7fd3
      size: 5445374
  clean_data@O3:
    cmd: python src/data/clean_data.py data/interim/updated/ES_O3_updated.csv data/interim/cleaned/ES_O3_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_O3_cleaned.csv
      md5: dcd125f2567e2d17f051485df5375a3c
      size: 5443209
  clean_data@CO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_CO_updated.csv data/interim/cleaned/ES_CO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_CO_cleaned.csv
      md5: e2a525895f50c27f30d970f3f1059387
      size: 5424259
  clean_data@NO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO_updated.csv data/interim/cleaned/ES_NO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 9de6f03f4a237eae1c44a09db92a8e83.dir
      size: 12732484
      nfiles: 8
    outs:
    - path: data/interim/cleaned/ES_NO_cleaned.csv
      md5: 9e8ff7faf689fd68598b500f3e737ce6
      size: 1814055
  clean_data@PM2.5:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM2.5_updated.csv data/interim/cleaned/ES_PM2.5_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_PM2.5_cleaned.csv
      md5: b8d2888ef958982c149aa7a2516d5e82
      size: 5560342
  clean_data@PM10:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM10_updated.csv data/interim/cleaned/ES_PM10_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_PM10_cleaned.csv
      md5: 31663ebce2c9a972eb82e309a6930925
      size: 5544476
  clean_data@NO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO2_updated.csv data/interim/cleaned/ES_NO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: baf87295f66b9a5132d7bae491eeff94.dir
      size: 32732089
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 4a5a1e16e588b38cddb5458f0bb53b87
      size: 1435
    outs:
    - path: data/interim/cleaned/ES_NO2_cleaned.csv
      md5: 7f86cc8e672c43d38a66e7400a6d2ca1
      size: 5397834
  load_historical_data@CO:
    cmd: python src/data/data_loading_historical.py data/raw/ CO 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_CO
      md5: 8feb7b1179b311753fdfe98575e224ec.dir
      size: 963672191
      nfiles: 621
    - path: data/raw/ES_CO_urls.txt
      md5: 70c0d21680377251cd8ce71a6283f76c
      size: 57756
  load_historical_data@PM10:
    cmd: python src/data/data_loading_historical.py data/raw/ PM10 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_PM10
      md5: d009ce4931cbd50e04e5ed6cb317ae66.dir
      size: 1754582546
      nfiles: 1242
    - path: data/raw/ES_PM10_urls.txt
      md5: 9a36e4db793ec80f1d4b857ee4ede091
      size: 114267
  load_historical_data@NO:
    cmd: python src/data/data_loading_historical.py data/raw/ NO 8
    deps:
    - path: metadata/download_config.json
      md5: 2c8889bb780db391582dc49b0b29f236
      size: 181
    - path: src/data/data_loading_historical.py
      md5: 643bcfaa18678d1c3a7c86820661c0c0
      size: 3484
    outs:
    - path: data/raw/ES_NO
      md5: 7a4f489e684b7c9f8e5599ac89e8c14d.dir
      size: 1359725246
      nfiles: 1028
    - path: data/raw/ES_NO_urls.txt
      md5: f0945454120c2f1611fb1156e89ddc13
      size: 95607
  load_historical_data@NO2:
    cmd: python src/data/data_loading_historical.py data/raw/ NO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_NO2
      md5: e0f145bff7c1a0ae28871a6fe477335d.dir
      size: 2505180760
      nfiles: 1594
    - path: data/raw/ES_NO2_urls.txt
      md5: 8be1e724c59de10ff1bdef1e72050d14
      size: 146651
  load_historical_data@SO2:
    cmd: python src/data/data_loading_historical.py data/raw/ SO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_SO2
      md5: 6a7a5bd5fc8f67ac8f6dd0c7b9287324.dir
      size: 2015798919
      nfiles: 1273
    - path: data/raw/ES_SO2_urls.txt
      md5: 572c05dea0e163e495dbeba586a4ca72
      size: 117119
  load_historical_data@O3:
    cmd: python src/data/data_loading_historical.py data/raw/ O3 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_O3
      md5: 122b40edb13331a3532ad8013bb4b765.dir
      size: 2081396473
      nfiles: 1312
    - path: data/raw/ES_O3_urls.txt
      md5: f23cce84008a81b1006e08feb51f52bc
      size: 120707
  load_historical_data@PM2.5:
    cmd: python src/data/data_loading_historical.py data/raw/ PM2.5 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 182
    - path: src/data/data_loading_historical.py
      md5: 762a488245e94f0ee2fd24282e0f24e5
      size: 3718
    outs:
    - path: data/raw/ES_PM2.5
      md5: dbc132e920849d4da98042f0a73053c8.dir
      size: 882000001
      nfiles: 677
    - path: data/raw/ES_PM2.5_urls.txt
      md5: 8a65ecb02a84a982659315fe3fb39528
      size: 64318
  calculation_AQI:
    cmd: python src/features/data_preprocessing.py data/interim/cleaned/ data/processed/AQI_dataset.csv
    deps:
    - path: data/interim/cleaned/
      md5: 7ba9605da67bf648ea539c76618de92b.dir
      size: 32815567
      nfiles: 7
    - path: src/features/data_preprocessing.py
      md5: b1c8e2b0a925136584916d2ec1861492
      size: 9623
    outs:
    - path: data/processed/AQI_dataset.csv
      md5: 8529f7d389b2aa77e81adc34605710a4
      size: 3625486
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py 1 data/processed/AQI_dataset.csv data/processed/train.csv
      data/processed/test.csv
    deps:
    - path: data/processed/AQI_dataset.csv
      md5: 8529f7d389b2aa77e81adc34605710a4
      size: 3625486
    - path: src/models/prepare_datasets.py
      md5: b985faa6f2fb190e64d4d4cd67f3b015
      size: 991
    outs:
    - path: data/processed/test.csv
      md5: e916c52b955fb18a894b437f267e4b3f
      size: 24
    - path: data/processed/train.csv
      md5: 875007bc1a7172e2bc90d0e2781e0ef6
      size: 26748
  train:
    cmd: python src/models/train.py  data/processed/train.csv data/processed/test.csv
      models/model.clf
    deps:
    - path: data/processed/test.csv
      md5: e916c52b955fb18a894b437f267e4b3f
      size: 24
    - path: data/processed/train.csv
      md5: 875007bc1a7172e2bc90d0e2781e0ef6
      size: 26748
    - path: src/models/train.py
      md5: df14e53d17062cc57aac70d7c5c79db3
      size: 1841
    outs:
    - path: models/model.clf
      md5: 330770b02006333b874b04fff7f179f0
      size: 9209605
  evaluate:
    cmd: python src/models/evaluate.py  data/processed/test.csv models/model.clf reports/scores.json
    deps:
    - path: models/model.clf
      md5: 330770b02006333b874b04fff7f179f0
      size: 9209605
    - path: src/models/evaluate.py
      md5: 92a14da4077d8226a1a653268f3d4a67
      size: 841
    outs:
    - path: reports/scores.json
      md5: d5aa04b6ffc6584f2ff06575c39bfa43
      size: 28
