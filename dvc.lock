schema: '2.0'
stages:
  merge_data@O3:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_O3_filtered.csv
      data/external/ES_O3.csv data/interim/updated/ES_O3_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_O3_updated.csv
      md5: b3e3fdce509baae372301cd9447df9f1
      size: 5454263
  merge_data@NO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO_filtered.csv
      data/external/ES_NO.csv data/interim/updated/ES_NO_updated.csv
    deps:
    - path: data/external/
      md5: 1b42b8c5e8a4e267604622a3e7d96b8f.dir
      size: 42186767
      nfiles: 8
    - path: data/interim/filtered
      md5: f99d5bd460b830c2e834704ad52bc5f0.dir
      size: 19438151
      nfiles: 8
    - path: src/data/data_raw_merge.py
      md5: c0b3192a31f60e77bda8f77e4618fccd
      size: 2552
    outs:
    - path: data/interim/updated/ES_NO_updated.csv
      md5: 3db1db3703b6943f3b18ffe17c71e3ee
      size: 1806411
  merge_data@PM10:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM10_filtered.csv
      data/external/ES_PM10.csv data/interim/updated/ES_PM10_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_PM10_updated.csv
      md5: 48f3f1d926b1e425c3ea9866697d0f76
      size: 5555693
  merge_data@PM2.5:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_PM2.5_filtered.csv
      data/external/ES_PM2.5.csv data/interim/updated/ES_PM2.5_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_PM2.5_updated.csv
      md5: aa6be54e052debf21f3b492a384136db
      size: 5571563
  merge_data@NO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_NO2_filtered.csv
      data/external/ES_NO2.csv data/interim/updated/ES_NO2_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_NO2_updated.csv
      md5: adde8452b2a1d23b1f059998636f2539
      size: 5408780
  merge_data@CO:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_CO_filtered.csv
      data/external/ES_CO.csv data/interim/updated/ES_CO_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_CO_updated.csv
      md5: 76d534e06d31281a4e7bb0aeac27fab3
      size: 5435200
  merge_data@SO2:
    cmd: python src/data/data_raw_merge.py data/interim/filtered/ES_SO2_filtered.csv
      data/external/ES_SO2.csv data/interim/updated/ES_SO2_updated.csv
    deps:
    - path: data/external/
      md5: 7fb526cbd25f4dfb0c682b425cd5d5c9.dir
      size: 73
      nfiles: 1
    - path: data/interim/filtered
      md5: 71b06a2e2f091c5a467b4490681baa11.dir
      size: 29468532
      nfiles: 7
    - path: src/data/data_raw_merge.py
      md5: 9e8a328028bd827e1ea87ce37c7530f9
      size: 2669
    outs:
    - path: data/interim/updated/ES_SO2_updated.csv
      md5: 3c2dc0b733e67ac70d2b5e319b3a78be
      size: 5456358
  filter_data@NO2:
    cmd: python src/data/filter_data.py data/raw/ES_NO2/ data/interim/filtered/ES_NO2_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_NO2_filtered.csv
      md5: fb27bd10b045b940675b62bb484030b7
      size: 4839880
  filter_data@NO:
    cmd: python src/data/filter_data.py data/raw/ES_NO/ data/interim/filtered/ES_NO_filtered.csv
    deps:
    - path: data/raw/
      md5: f9f0cbd3ac6022e3baa43e123dc0f30c.dir
      size: 7097091282
      nfiles: 5380
    outs:
    - path: data/interim/filtered/ES_NO_filtered.csv
      md5: 59cba7e5e2ca6515bb7c72c17368adb0
      size: 2740661
  filter_data@SO2:
    cmd: python src/data/filter_data.py data/raw/ES_SO2/ data/interim/filtered/ES_SO2_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_SO2_filtered.csv
      md5: eb4bedf8f0da251c817209812a1e4ccc
      size: 4887458
  filter_data@CO:
    cmd: python src/data/filter_data.py data/raw/ES_CO/ data/interim/filtered/ES_CO_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_CO_filtered.csv
      md5: f8522d11c7bffe9e77866b57c430c50a
      size: 4866300
  filter_data@O3:
    cmd: python src/data/filter_data.py data/raw/ES_O3/ data/interim/filtered/ES_O3_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_O3_filtered.csv
      md5: ba9d3ae4034d82ae840fee527c30e734
      size: 4885363
  filter_data@PM2.5:
    cmd: python src/data/filter_data.py data/raw/ES_PM2.5/ data/interim/filtered/ES_PM2.5_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_PM2.5_filtered.csv
      md5: 50b9f5031096f9185a3a50dd973e83a4
      size: 5002663
  filter_data@PM10:
    cmd: python src/data/filter_data.py data/raw/ES_PM10/ data/interim/filtered/ES_PM10_filtered.csv
    deps:
    - path: data/raw/
      md5: f1d347042d532a248ec290d0d4a50c49.dir
      size: 10206741918
      nfiles: 6727
    - path: src/data/filter_data.py
      md5: 91ec84c5a5ae49e0f6754ed4bb74f8b8
      size: 1136
    outs:
    - path: data/interim/filtered/ES_PM10_filtered.csv
      md5: dba92274a335660bdf90eea5b79853b3
      size: 4986793
  clean_data@SO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_SO2_updated.csv data/interim/cleaned/ES_SO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_SO2_cleaned.csv
      md5: af2d2adaddf0096c58688aeb59e4f13d
      size: 5470235
  clean_data@O3:
    cmd: python src/data/clean_data.py data/interim/updated/ES_O3_updated.csv data/interim/cleaned/ES_O3_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_O3_cleaned.csv
      md5: d38f5ba71b0537536e1bad3aff3df5ad
      size: 5468086
  clean_data@CO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_CO_updated.csv data/interim/cleaned/ES_CO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_CO_cleaned.csv
      md5: 6297ad61e5a8d6b3da732cd96614aa1b
      size: 5449023
  clean_data@NO:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO_updated.csv data/interim/cleaned/ES_NO_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 9de6f03f4a237eae1c44a09db92a8e83.dir
      size: 12732484
      nfiles: 8
    outs:
    - path: data/interim/cleaned/ES_NO_cleaned.csv
      md5: 9e8ff7faf689fd68598b500f3e737ce6
      size: 1814055
  clean_data@PM2.5:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM2.5_updated.csv data/interim/cleaned/ES_PM2.5_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_PM2.5_cleaned.csv
      md5: ede9385686a743cdfd41056bca524480
      size: 5585710
  clean_data@PM10:
    cmd: python src/data/clean_data.py data/interim/updated/ES_PM10_updated.csv data/interim/cleaned/ES_PM10_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_PM10_cleaned.csv
      md5: 10cb6dcd39a7f76fcafbbe3c6ed5ae47
      size: 5569786
  clean_data@NO2:
    cmd: python src/data/clean_data.py data/interim/updated/ES_NO2_updated.csv data/interim/cleaned/ES_NO2_cleaned.csv
    deps:
    - path: data/interim/updated/
      md5: 38d380fa8167d1b551676e7896484666.dir
      size: 32881930
      nfiles: 7
    - path: src/data/clean_data.py
      md5: 01d71e8a381723cdb016544d772d053c
      size: 1420
    outs:
    - path: data/interim/cleaned/ES_NO2_cleaned.csv
      md5: 510efcda5cc81fa692cc3c4555e03124
      size: 5422495
  load_historical_data@CO:
    cmd: python src/data/data_loading_historical.py data/raw/ CO 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_CO
      md5: 6eadf51d1b577a252326d6f7b2c621b2.dir
      size: 964371135
      nfiles: 621
    - path: data/raw/ES_CO_urls.txt
      md5: 70c0d21680377251cd8ce71a6283f76c
      size: 57756
  load_historical_data@PM10:
    cmd: python src/data/data_loading_historical.py data/raw/ PM10 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_PM10
      md5: f40bb081551a26e5c43e376b1dcd7c4a.dir
      size: 1755126227
      nfiles: 1242
    - path: data/raw/ES_PM10_urls.txt
      md5: 9a36e4db793ec80f1d4b857ee4ede091
      size: 114267
  load_historical_data@NO:
    cmd: python src/data/data_loading_historical.py data/raw/ NO 8
    deps:
    - path: metadata/download_config.json
      md5: 2c8889bb780db391582dc49b0b29f236
      size: 181
    - path: src/data/data_loading_historical.py
      md5: 643bcfaa18678d1c3a7c86820661c0c0
      size: 3484
    outs:
    - path: data/raw/ES_NO
      md5: 7a4f489e684b7c9f8e5599ac89e8c14d.dir
      size: 1359725246
      nfiles: 1028
    - path: data/raw/ES_NO_urls.txt
      md5: f0945454120c2f1611fb1156e89ddc13
      size: 95607
  load_historical_data@NO2:
    cmd: python src/data/data_loading_historical.py data/raw/ NO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_NO2
      md5: 262fd8afdfd58ecea368eabadbe7f4ce.dir
      size: 2505709535
      nfiles: 1594
    - path: data/raw/ES_NO2_urls.txt
      md5: 8be1e724c59de10ff1bdef1e72050d14
      size: 146651
  load_historical_data@SO2:
    cmd: python src/data/data_loading_historical.py data/raw/ SO2 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_SO2
      md5: 7aeea4e6268e7be9ea74bed5b5f877c1.dir
      size: 2016290028
      nfiles: 1273
    - path: data/raw/ES_SO2_urls.txt
      md5: 572c05dea0e163e495dbeba586a4ca72
      size: 117119
  load_historical_data@O3:
    cmd: python src/data/data_loading_historical.py data/raw/ O3 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_O3
      md5: b43c23b2be6c08e7f96e498fbe91195c.dir
      size: 2081672961
      nfiles: 1312
    - path: data/raw/ES_O3_urls.txt
      md5: f23cce84008a81b1006e08feb51f52bc
      size: 120707
  load_historical_data@PM2.5:
    cmd: python src/data/data_loading_historical.py data/raw/ PM2.5 8
    deps:
    - path: metadata/download_config.json
      md5: 337225c3b7798ca418decac14940e55d
      size: 175
    - path: src/data/data_loading_historical.py
      md5: 24a4c7548168c361f1eceb3a2e09fdd6
      size: 3568
    outs:
    - path: data/raw/ES_PM2.5
      md5: b6dc132b595e0011b57ad9907428c06e.dir
      size: 882951048
      nfiles: 678
    - path: data/raw/ES_PM2.5_urls.txt
      md5: 05de7de211481766450934092fd99694
      size: 64413
  calculation_AQI:
    cmd: python src/features/data_preprocessing.py data/interim/cleaned/ data/processed/AQI_dataset.csv
    deps:
    - path: data/interim/cleaned/
      md5: 54dd5a1f5013edf14b3b538d2f252bee.dir
      size: 32965408
      nfiles: 7
    - path: metadata/metadata_pollutants.yaml
      md5: c4a0c96a554f59ed6dbf93850bbada3e
      size: 483
    - path: src/features/data_preprocessing.py
      md5: ec377b82e80a14277517fbc29a7d4574
      size: 9370
    outs:
    - path: data/processed/AQI_dataset.csv
      md5: a1ec57429164e8095824ce3296385e1c
      size: 3653281
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py 1 data/processed/AQI_dataset.csv data/processed/train.csv
      data/processed/test.csv
    deps:
    - path: data/processed/AQI_dataset.csv
      md5: a1ec57429164e8095824ce3296385e1c
      size: 3653281
    - path: src/models/prepare_datasets.py
      md5: 5b2270dd22eb1de333a723985ceacadf
      size: 921
    outs:
    - path: data/processed/test.csv
      md5: b69bcfc783808a75a9ec43a26e3c74bc
      size: 40
    - path: data/processed/train.csv
      md5: 8dc1150e965cc12aa6ee4b267fbc5764
      size: 26721
  train:
    cmd: python src/models/train.py  data/processed/train.csv data/processed/test.csv
      models/model.clf
    deps:
    - path: data/processed/test.csv
      md5: b69bcfc783808a75a9ec43a26e3c74bc
      size: 38
    - path: data/processed/train.csv
      md5: 8dc1150e965cc12aa6ee4b267fbc5764
      size: 26721
    - path: src/models/train.py
      md5: bd8e54591dd140f6c531a186f3699c19
      size: 1912
    outs:
    - path: models/model.clf
      md5: b0ac24ca616c812a33b52b103ca0df46
      size: 9228549
  evaluate:
    cmd: python src/models/evaluate.py  data/processed/test.csv models/model.clf reports/scores.json
    deps:
    - path: models/model.clf
      md5: b0ac24ca616c812a33b52b103ca0df46
      size: 9228549
    - path: src/models/evaluate.py
      md5: 9c3652810bd922982f4cbf7548f65b9d
      size: 839
    outs:
    - path: reports/scores.json
      md5: 8d5cc0e8e4bc44559fd0abc59d6795d3
      size: 28
